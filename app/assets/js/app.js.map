{"version":3,"sources":["app.js"],"names":["app","angular","module","run","$rootScope","$state","$on","event","toState","toParams","fromState","fromParams","error","go","config","$stateProvider","$urlRouterProvider","$mdThemingProvider","$mdIconProvider","state","url","controller","templateUrl","resolve","currentAuth","Auth","$waitForSignIn","$requireSignIn","otherwise","theme","primaryPalette","accentPalette","warnPalette","factory","$firebaseAuth","$firebaseObject","uid","ref","firebase","database","child","$scope","loggedIn","isLoading","doLogOut","$signOut","user","signupError","signinError","$parent","$onAuthStateChanged","firebaseUser","createUserByEmail","$createUserWithEmailAndPassword","signupEmail","signupPassword","then","message","emailSignIn","$signInWithEmailAndPassword","signinEmail","signinPassword","socialSignIn","provider","$signInWithPopup","Profile","profile","type","email","$bindTo"],"mappings":"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","file":"app.js","sourcesContent":[";(function() { \n\n\tvar app = angular.module('magPortal', ['ngAnimate','ui.router','firebase','ngMaterial','ngMessages']);\n\n\n\tapp.run(['$rootScope', '$state', function($rootScope, $state) {\n\t\t\n\t\t//redirect logged out users\n\t\t$rootScope.$on('$stateChangeError', function(event, toState, toParams, fromState, fromParams, error) {\n\t\t\tif (error == 'AUTH_REQUIRED') {\n\t\t\t\t$state.go('/home');\n\t\t\t}\n\t\t});\n\n\t}]);\n\n\n\t//App Config\n\t//-------------------------------------------------------//\n\tapp.config(['$stateProvider', '$urlRouterProvider', '$mdThemingProvider', '$mdIconProvider', function($stateProvider, $urlRouterProvider, $mdThemingProvider, $mdIconProvider) {\n\t\t\n\t\t//Routes\n\t\t$stateProvider.state('home', {\n\t\t\turl: '/home',\n\t\t\tcontroller: 'homeCtrl',\n\t\t\ttemplateUrl: 'views/home.html',\n\t\t\tresolve: {\n\t\t\t\t'currentAuth': ['Auth', function(Auth) {\n\t\t\t\t\treturn Auth.$waitForSignIn();\n\t\t\t\t}]\n\t\t\t}\n\t\t}).state('account', {\n\t\t\turl: '/account',\n\t\t\tcontroller: 'accountCtrl',\n\t\t\ttemplateUrl: 'views/account.html',\n\t\t\tresolve: {\n\t\t\t\t'currentAuth': ['Auth', function(Auth) {\n\t\t\t\t\treturn Auth.$requireSignIn();\n\t\t\t\t}]\n\t\t\t}\n\t\t}).state('survey', {\n\t\t\turl: '/survey',\n\t\t\tcontroller: 'surveyCtrl',\n\t\t\ttemplateUrl: 'views/survey.html',\n\t\t\tresolve: {\n\t\t\t\t'currentAuth': ['Auth', function(Auth) {\n\t\t\t\t\treturn Auth.$requireSignIn();\n\t\t\t\t}]\n\t\t\t}\n\t\t}).state('survey-edit', {\n\t\t\turl: '/survey-edit',\n\t\t\tcontroller: 'surveyCtrl',\n\t\t\ttemplateUrl: 'views/survey-edit.html'\n\t\t});\n\t\t$urlRouterProvider.otherwise('/home');\n\n\t\t//theme colors\n\t\t$mdThemingProvider.theme('default').primaryPalette('teal').accentPalette('deep-orange').warnPalette('pink');\n\t}]);\n\n\n\n\t//factories around firebase modules\n\tapp.factory('Auth', ['$firebaseAuth', function($firebaseAuth) {\n\t  return $firebaseAuth();\n\t}]);\n\tapp.factory('Profile', ['$firebaseObject', function($firebaseObject) {\n\t\treturn function(uid) {\n\t\t\tvar ref = firebase.database().ref().child('Profiles').child(uid);\n\t\t\treturn $firebaseObject(ref);\n\t\t};\n\t}]);\n\tapp.factory('DB', ['$firebaseObject', function($firebaseObject) {\n\t\tvar ref = firebase.database().ref();\n\t\treturn $firebaseObject(ref);\n\t}]);\n\n\n\n\t//Shell Controller - header, footer, overlay, etc\n\tapp.controller('shellCtrl', ['$scope', '$state', 'Auth', function($scope, $state, Auth) {\n\t\t$scope.loggedIn = false;\n\t\t$scope.isLoading = false;\n\n\t\t$scope.doLogOut = function() {\n\t\t\tAuth.$signOut();\n\t\t\t$scope.loggedIn = false;\n\t\t\t$state.go('home');\n\t\t};\n\t}]);\n\n\n\n\t//Home Controller - shows signup/in, or default dash for signed-in user\n\t//----------------------------------------------------------------------------//\n\tapp.controller('homeCtrl', ['$scope', '$state', 'currentAuth', 'Auth', function($scope, $state, currentAuth, Auth) {\n\n\t\t$scope.user = currentAuth;\n\t\t\n\t\t$scope.signupError = false;\n\t\t$scope.signinError = false;\n\n\t\tif (currentAuth) {\n\t\t\t$scope.$parent.loggedIn = true;\n\t\t} \n\n\t\tAuth.$onAuthStateChanged(function(firebaseUser) {\n\t\t\t$scope.user = firebaseUser;\n\t\t\tif (!firebaseUser) {\n\t\t\t\t$scope.$parent.loggedIn = false;\n\t\t\t}\n\t\t});\n\n\t\t\n\t\t$scope.createUserByEmail = function() {\n\t\t\tAuth.$createUserWithEmailAndPassword($scope.signupEmail, $scope.signupPassword)\n\t\t\t\t.then(function(firebaseUser) {\n\t\t\t\t\t$scope.user = firebaseUser;\n\t\t\t\t}).catch(function(error) {\t\n\t\t\t\t\t$scope.signupError = error.message;\n\t\t\t\t});\n\t\t};\n\n\t\t$scope.emailSignIn = function() {\n\t\t\tAuth.$signInWithEmailAndPassword($scope.signinEmail, $scope.signinPassword)\n\t\t\t\t.then(function(firebaseUser) {\n\t\t\t\t\t$scope.user = firebaseUser;\n\t\t\t\t\t$scope.$parent.loggedIn = true;\n\t\t\t\t}).catch(function(error) {\n\t\t\t\t\t$scope.signinError = error.message;\n\t\t\t\t});\n\t\t};\n\n\t\t$scope.socialSignIn = function(provider) {\n\t\t\tAuth.$signInWithPopup(provider).then(function() {\n\t\t\t}).catch(function(error) {\n\t\t\t\t$scope.signinError = error;\n\t\t\t});\n\t\t};\n\n\t\t$scope.doLogOut = $scope.$parent.doLogOut;\n\t}]);\n\n\n\n\n\t//Account Controller -\n\t//----------------------------------------------------------------//\n\tapp.controller('accountCtrl', ['$scope', 'currentAuth', 'Profile', 'Auth', function($scope, currentAuth, Profile, Auth) {\n\n\t\t$scope.user = currentAuth;\n\n\t\tif (currentAuth) {\n\t\t\t$scope.$parent.loggedIn = true;\n\t\t}\n\n\t\tAuth.$onAuthStateChanged(function(firebaseUser) {\n\t\t\t$scope.user = firebaseUser;\n\t\t});\n\n\t\t$scope.profile = {\n\t\t\ttype: 'super',\n\t\t\temail: $scope.user.email\n\t\t};\n\n\t\t//syncs data 3 way\n\t\tProfile(currentAuth.uid).$bindTo($scope, \"profile\");\n\t\t\n\t}]);\n\n\n\n\t//Survey Controller -\n\t//----------------------------------------------------------------//\n\tapp.controller('surveyCtrl', ['$scope', 'currentAuth', 'Auth', function($scope, currentAuth, Auth) {\n\n\t\t$scope.user = currentAuth;\n\n\t\tif (currentAuth) {\n\t\t\t$scope.$parent.loggedIn = true;\n\t\t}\n\n\t\tAuth.$onAuthStateChanged(function(firebaseUser) {\n\t\t\t$scope.user = firebaseUser;\n\t\t});\n\n\n\t}]);\n\n\n})();"],"sourceRoot":"/source/"}